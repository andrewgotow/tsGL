<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>WebGL</title>

    <script src="bin/tsc.js"></script>
    <script src="src/web-components/custom-elements/tsgl-elements.js"></script>

  </head>
  <body onload="GL.init( document.getElementById('glcanvas') ); start();">
    <canvas id="glcanvas" width="800" height="800" style="border: 1px solid gray">
      It looks like WebGL couldn't be initialized. Ensure your browser supports it :(
    </canvas>
  </body>


  <!-- Load Assets -->
  <tsgl-shader id="test" vert-src="/assets/shaders/test.vert" frag-src="/assets/shaders/test.frag"></tsgl-shader>

  <tsgl-material id="mat_brick" shader="test">
    <tsgl-texture name="uMainTex" src="/assets/textures/dabrovic-sponza/brick.png"></tsgl-texture>
  </tsgl-material>
  <tsgl-material id="mat_trim" shader="test">
    <tsgl-texture name="uMainTex" src="/assets/textures/dabrovic-sponza/trim.png"></tsgl-texture>
  </tsgl-material>
  <tsgl-material id="mat_arch" shader="test">
    <tsgl-texture name="uMainTex" src="/assets/textures/dabrovic-sponza/arch.png"></tsgl-texture>
  </tsgl-material>
  <tsgl-material id="mat_door" shader="test">
    <tsgl-texture name="uMainTex" src="/assets/textures/dabrovic-sponza/door.png"></tsgl-texture>
  </tsgl-material>
  <tsgl-material id="mat_window" shader="test">
    <tsgl-texture name="uMainTex" src="/assets/textures/dabrovic-sponza/window.png"></tsgl-texture>
  </tsgl-material>

  <tsgl-mesh id="mesh_arches" src="/assets/models/dabrovic-sponza/arches.obj"></tsgl-mesh>
  <tsgl-mesh id="mesh_ceiling" src="/assets/models/dabrovic-sponza/ceiling.obj"></tsgl-mesh>
  <tsgl-mesh id="mesh_columns" src="/assets/models/dabrovic-sponza/columns.obj"></tsgl-mesh>
  <tsgl-mesh id="mesh_doors" src="/assets/models/dabrovic-sponza/doors.obj"></tsgl-mesh>
  <tsgl-mesh id="mesh_exterior" src="/assets/models/dabrovic-sponza/exterior.obj"></tsgl-mesh>
  <tsgl-mesh id="mesh_relief" src="/assets/models/dabrovic-sponza/relief.obj"></tsgl-mesh>
  <tsgl-mesh id="mesh_trim" src="/assets/models/dabrovic-sponza/trim.obj"></tsgl-mesh>
  <tsgl-mesh id="mesh_walls" src="/assets/models/dabrovic-sponza/walls.obj"></tsgl-mesh>
  <tsgl-mesh id="mesh_windows" src="/assets/models/dabrovic-sponza/windows.obj"></tsgl-mesh>

  <!-- Load Scene Hierarchy -->
  <tsgl-scene id="scene1">

    <!-- Systems -->
    <tsgl-system type="renderer"></tsgl-system>

    <!-- Entities -->
    <tsgl-entity id="camera">
      <tsgl-component type="camera"></tsgl-component>
      <tsgl-component type="transform" x="2" y="2" z="0"></tsgl-component>
    </tsgl-entity>

    <tsgl-entity>
      <tsgl-component type="transform" x="-10" y="2" z="2"></tsgl-component>
      <tsgl-component type="light" color="#FF8888" intensity="0.5" range="5"></tsgl-component>
    </tsgl-entity>

    <tsgl-entity>
      <tsgl-component type="transform" x="0" y="10" z="0"></tsgl-component>
      <tsgl-component type="light" color="#FFFFFF" intensity="0.4" range="10"></tsgl-component>
    </tsgl-entity>

    <tsgl-entity>
      <tsgl-component type="transform" x="10" y="2" z="-2"></tsgl-component>
      <tsgl-component type="light" color="#8888FF" intensity="0.5" range="5"></tsgl-component>
    </tsgl-entity>

    <tsgl-entity>
      <tsgl-component type="renderable" mesh="mesh_arches" material="mat_arch"></tsgl-component>
    </tsgl-entity>
    <tsgl-entity>
      <tsgl-component type="renderable" mesh="mesh_ceiling" material="mat_brick"></tsgl-component>
    </tsgl-entity>
    <tsgl-entity>
      <tsgl-component type="renderable" mesh="mesh_columns" material="mat_arch"></tsgl-component>
    </tsgl-entity>
    <tsgl-entity>
      <tsgl-component type="renderable" mesh="mesh_doors" material="mat_door"></tsgl-component>
    </tsgl-entity>
    <tsgl-entity>
      <tsgl-component type="renderable" mesh="mesh_exterior" material="mat_brick"></tsgl-component>
    </tsgl-entity>
    <tsgl-entity>
      <tsgl-component type="renderable" mesh="mesh_relief" material="mat_brick"></tsgl-component>
    </tsgl-entity>
    <tsgl-entity>
      <tsgl-component type="renderable" mesh="mesh_trim" material="mat_trim"></tsgl-component>
    </tsgl-entity>
    <tsgl-entity>
      <tsgl-component type="renderable" mesh="mesh_walls" material="mat_brick"></tsgl-component>
    </tsgl-entity>
    <tsgl-entity>
      <tsgl-component type="renderable" mesh="mesh_windows" material="mat_window"></tsgl-component>
    </tsgl-entity>

  </tsgl-scene>

</html>
